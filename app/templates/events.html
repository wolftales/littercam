{% extends "base.html" %}
{% block head_extra %}
  <meta http-equiv="refresh" content="30">
{% endblock %}
{% block content %}
  <section class="panel">
    <h2>Events</h2>
    {% if not grouped %}
      <p>No events yet.</p>
    {% endif %}
    {% for date, events in grouped.items() %}
      <h3>{{ date }}</h3>
      <ul class="event-list">
        {% for event in events %}
          <li>
            <a href="/events/{{ event.event_id }}" class="event-row">
              {% if thumbs.get(event.event_id) %}
                <img src="{{ thumbs[event.event_id] }}" class="event-thumb" alt="Event thumbnail" />
              {% else %}
                <div class="event-thumb event-thumb-empty"></div>
              {% endif %}
              <div class="event-info">
                <span class="event-time">{{ event.event_id | event_time }}</span>
                <span class="event-meta">{{ event.meta.image_count }} frames</span>
                {% if event.meta.cat_detected %}
                  <span class="tag tag-cat">Cat ({{ "%.0f"|format(event.meta.cat_confidence * 100) }}%)</span>
                {% endif %}
                {% if event.meta.cat_tag %}
                  <span class="tag">{{ event.meta.cat_tag }}</span>
                {% endif %}
              </div>
            </a>
          </li>
        {% endfor %}
      </ul>
    {% endfor %}
  </section>
{% endblock %}
